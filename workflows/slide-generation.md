# AI向けスライド生成ワークフロー

このドキュメントは、AIがコンテンツMarkdownファイルを読み込んで、Slidev形式のスライドに自動変換する際の詳細なガイドラインです。

---

## 📋 概要

**目的**: ユーザーが執筆した調査・研究内容（コンテンツMD）を、構造化されたSlidevスライドに変換する

**原則**:
1. **既存のコンポーネント優先**: `design_system/ai-guide.md`のパターンを活用
2. **1スライド = 1メッセージ**: 情報を適切に分割
3. **視覚的な確認**: 生成後は`chrome-devtools-mcp`で確認
4. **一貫性**: 同じタイプの内容には同じレイアウト
5. **入力情報のみ使用**: コンテンツMDに書かれた情報のみを使用し、抽象的表現・誇張表現・推測情報を追加しない

---

## 🚀 ワークフロー

### Step 1: コンテンツMDの読み込み

```
1. 指定されたファイルパスからMDを読み込み
2. frontmatterの抽出（タイトル、著者など）
3. 本文の構造を解析
```

### Step 2: 構造分析

#### 見出しレベルの抽出

- H1 (`#`) → セクション区切りのリスト
- H2 (`##`) → スライド候補のリスト
- H3 (`###`) → サブセクションのリスト

#### コンテンツブロックの分類

各セクションの内容を以下に分類:
- テキスト（段落）
- リスト（箇条書き）
- コードブロック
- 画像
- 引用
- 表

### Step 3: スライド分割

#### 分割ルール

| 条件 | 対応 |
|------|------|
| H1見出し | 新しいセクション区切りスライド |
| H2見出し | 新しいコンテンツスライド |
| H3見出し | 同じスライド内（サブセクション） |
| リスト8項目以上 | 複数スライドに分割 |
| 段落3つ以上 | 複数スライドに分割を検討 |
| コードブロック | 説明と分離（2カラム） |
| 画像 | 説明と分離（別スライドまたは2カラム） |

#### 7±2の法則

1スライドの情報量上限:
- リスト項目: 最大7項目
- 段落: 2-3段落
- コード行数: 20行以内

### Step 4: コンポーネント選択

#### 表紙スライド

**条件**:
- frontmatterにタイトル情報がある
- または、最初のH1とその直後のテキスト

**使用コンポーネント**: `CoverSlide`

```vue
<CoverSlide
  title="[MDからタイトル抽出]"
  subtitle="[MDから副題抽出]"
  event="[イベント名]"
  author="[著者名]"
  :social="{ github: 'username', twitter: 'username' }"
/>
```

#### セクション区切りスライド

**条件**: H1見出し

**テンプレート**:
```md
---
layout: center
class: slide-gradient-bg
---

# <span class="gradient-heading">[H1の内容]</span>

[H1直後のテキスト（あれば）]
```

#### 通常のコンテンツスライド

**条件**: H2見出し + テキスト/リスト

**テンプレート**:
```md
---
# デフォルトレイアウト
---

# [H2の内容]

[本文]

- [リスト項目]
```

#### 2カラムスライド（コード + 説明）

**条件**: H2見出し + 説明テキスト + コードブロック

**テンプレート**:
```vue
<TwoColumnLayout>
  <template #left>

# [H2の内容]

[説明テキスト]

  </template>
  <template #right>

\`\`\`[言語]
[コード]
\`\`\`

  </template>
</TwoColumnLayout>
```

#### 画像中央表示スライド

**条件**: 画像 + 説明

**テンプレート**:
```md
---
# タイトルがあればここに
---

# [タイトル]

[説明テキスト]

<CenteredImage
  src="[画像パス]"
  alt="[alt属性]"
  caption="[キャプション（あれば）]"
/>
```

---

## 🔍 詳細な変換ルール

### 1. Frontmatter変換

**入力**:
```md
---
title: プレゼンテーションタイトル
subtitle: サブタイトル
author: 著者名
event: イベント名
---
```

**出力**: `CoverSlide` の props に変換

### 2. H1の変換

**入力**:
```md
# Introduction
```

**出力**:
```md
---
layout: center
class: slide-gradient-bg
---

# <span class="gradient-heading">Introduction</span>
```

### 3. H2の変換（通常）

**入力**:
```md
## Background

近年、Web開発の複雑化に伴い...
```

**出力**:
```md
---
---

# Background

近年、Web開発の複雑化に伴い...
```

### 4. リストの変換

**入力**:
```md
## 導入した技術

- TypeScript 5.0による型チェック
- Vite 4.0によるビルド
- プラグインシステムによる機能拡張
```

**出力** (絵文字を自動追加):
```md
---
---

# 導入した技術

- <EmojiText emoji="✨">TypeScript 5.0による型チェック</EmojiText>
- <EmojiText emoji="🚀">Vite 4.0によるビルド</EmojiText>
- <EmojiText emoji="🔧">プラグインシステムによる機能拡張</EmojiText>
```

**または** (シンプルに):
```md
- ✨ TypeScript 5.0による型チェック
- 🚀 Vite 4.0によるビルド
- 🔧 プラグインシステムによる機能拡張
```

### 5. コードブロックの変換

**入力**:
```md
## 基本的な型定義

TypeScriptでは、変数や関数に型を指定できます：

\`\`\`ts
const name: string = 'John'
const age: number = 30
\`\`\`

型定義により、コンパイル時にエラーを検出できます。
```

**出力**:
```vue
<TwoColumnLayout>
  <template #left>

# 基本的な型定義

TypeScriptでは、変数や関数に型を指定できます：

型定義により、コンパイル時にエラーを検出できます。

  </template>
  <template #right>

\`\`\`ts
const name: string = 'John'
const age: number = 30
\`\`\`

  </template>
</TwoColumnLayout>
```

### 6. 画像の変換

**入力**:
```md
## システム構成図

![システム構成図](./images/architecture.png)
```

**出力**:
```md
---
---

# システム構成図

<CenteredImage
  src="./images/architecture.png"
  alt="システム構成図"
/>
```

---

## 📝 生成時のチェックリスト

### 必須チェック

- [ ] 表紙スライドが生成されているか？
- [ ] 各セクション（H1）がセクション区切りスライドになっているか？
- [ ] 1スライドの情報量は適切か？（7±2の法則）
- [ ] コードブロックは2カラムレイアウトになっているか？
- [ ] 既存のコンポーネント（`CoverSlide`, `TwoColumnLayout`, `CenteredImage`など）を使用しているか？
- [ ] デフォルト設定（`transition`など）を重複して書いていないか？
- [ ] コンテンツMDの情報を正確に転記しているか？
- [ ] 抽象的表現・誇張表現・推測情報を追加していないか？

### 推奨チェック

- [ ] リスト項目に絵文字が追加されているか？
- [ ] 長いテキストは適切に分割されているか？
- [ ] 画像にはキャプションがあるか？
- [ ] セクション区切りには`gradient-heading`が使用されているか？

---

## 🎨 スタイル適用ルール

### 見出しのスタイル

- セクション区切り（H1）: `gradient-heading`
- 通常のスライドタイトル（H2）: デフォルトスタイル

### リストのスタイル

- 3項目以下: そのまま
- 4-7項目: `EmojiText`で装飾
- 8項目以上: 複数スライドに分割

### コードブロック

- 20行以下: 2カラムレイアウト
- 20行以上: 複数スライドに分割を検討

---

## 🚨 注意事項

### やってはいけないこと

1. **手動HTMLの多用**: 既存のコンポーネントで対応できないか確認
2. **情報の詰め込み**: 1スライドに多くの情報を入れない
3. **デフォルト設定の重複記述**: `transition`などは書かない
4. **コンポーネントの未使用**: 表紙を手動で書くなど
5. **情報の捏造・追加**:
   - ❌ 抽象的な表現を追加（モダンな、革新的な、美しい）
   - ❌ 誇張表現を追加（簡単に、劇的な、圧倒的な）
   - ❌ 存在しない数値や実測値を追加
   - ❌ コンテンツMDに書かれていない情報を推測して追加
   - ❌ ユーザーの表現を勝手に言い換える

### 必ずやること

1. **コンポーネントの活用**: `design_system/ai-guide.md`を参照
2. **情報の適切な分割**: 7±2の法則を守る
3. **一貫性の維持**: 同じタイプには同じレイアウト
4. **視覚的確認**: 生成後は`chrome-devtools-mcp`で確認
5. **入力情報の忠実な使用**:
   - ✅ コンテンツMDのテキストをそのまま使用
   - ✅ 提供された情報を正確に転記
   - ✅ ユーザーが書いた表現を尊重

---

## 💡 実装例

### 入力: content/example.md（一部）

```md
---
title: TypeScript開発のベストプラクティス
subtitle: 型安全性を活かした開発手法
author: 開発太郎
event: Web技術勉強会 2025
---

# Introduction

## Background

近年、Web開発の複雑化に伴い、型安全性の重要性が増しています。

## 問題点

従来のJavaScript開発における主な課題：

- ランタイムエラーの多発
- リファクタリングの困難さ
- IDEサポートの不足
```

### 出力: slides.md

```vue
<CoverSlide
  title="TypeScript開発のベストプラクティス"
  subtitle="型安全性を活かした開発手法"
  event="Web技術勉強会 2025"
  author="開発太郎"
/>

---
layout: center
class: slide-gradient-bg
---

# <span class="gradient-heading">Introduction</span>

---

# Background

近年、Web開発の複雑化に伴い、型安全性の重要性が増しています。

---

# 問題点

従来のJavaScript開発における主な課題：

- <EmojiText emoji="⚠️">ランタイムエラーの多発</EmojiText>
- <EmojiText emoji="🔧">リファクタリングの困難さ</EmojiText>
- <EmojiText emoji="💻">IDEサポートの不足</EmojiText>
```

---

## 📚 参考

- `../design_system/ai-guide.md`: スライドテンプレートとコンポーネント
- `../design_system/components.md`: コンポーネント詳細
- `../content/README.md`: コンテンツMD執筆ガイド
- `../slidev_context/15-chrome-devtools-guide.md`: 視覚的確認方法

---

このワークフローに従うことで、一貫性のあるスライドを自動生成できます。
